{"version":3,"sources":["components/Home.js","components/Result.js","components/Wrapper.js","App.js","index.js"],"names":["Home","state","ready","handleStartClick","connect","send","_this2","this","setTimeout","setState","_this$props","props","user","shared","react_default","a","createElement","className","concat","lottie_react_web_dist_default","options","loop","autoplay","animationData","Planes","rendererSettings","preserveAspectRatio","height","width","style","backgroundImage","photo_200","photo_max_orig","onClick","React","Component","texts","china","pisa","everest","london","paris","amsterdam","taiga","prague","munich","kaluga","tbilisi","mongolia","saintp","Result","handleRetryClick","handleShareClick","_this","shareVideo","prevProps","_this3","result","friend","id","first_name","Wrapper","_ref","block","react","components_Home","components_Result","results","App","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleShareVideo","document","getElementById","innerHTML","JSON","stringify","share","token","subscribe","res","detail","type","data","users","Math","floor","random","length","access_token","app_id","scope","_this$state","dist","activePanel","components_Wrapper","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.b8e4d74d.chunk.js","sourcesContent":["/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react'\n\nimport connect from '@vkontakte/vkui-connect'\n\nimport Lottie from 'lottie-react-web'\n\nimport * as Planes from '../animation/planes.json'\n\nclass Home extends React.Component {\n    state = {\n        ready: false\n    }\n\n    componentDidMount() {\n        setTimeout(() => this.setState({ ready: true }), 800)\n    }\n\n    handleStartClick = () => {\n        connect.send('VKWebAppGetFriends', {})\n    }\n\n    render() {\n        const { ready } = this.state\n        const { user, shared } = this.props\n\n        return (\n            <div className={`home ${shared ? 'home--shared' : ''}`}>\n                <div className='logo' />\n                {!shared && !ready && <div className='animation'>\n                    <Lottie\n                        options={{\n                            loop: false,\n                            autoplay: true,\n                            animationData: Planes.default,\n                            rendererSettings: {\n                                preserveAspectRatio: 'xMidYMid slice'\n                            }\n                        }}\n                        height='100%'\n                        width='100%'\n                    />\n                </div>}\n                <div className={`home_content ${!ready ? 'hidden' : ''}`}>\n                    <h1>{!shared ? 'Узнай' : 'Готово!'}</h1>\n                    <p>{!shared ? 'куда и с кем ты поедешь в путешествие' : 'Участвуй в конкурсе и выиграй путешествие'}</p>\n                    {!shared && <div className='home_circles'>\n                        <div className='home_circle circle'>\n                            <div className='avatar' style={{ backgroundImage: `url(${user && (user.photo_200 || user.photo_max_orig)})` }} />\n                        </div>\n                        <span>+</span>\n                        <div className='home_circle circle'>\n                            <div className='avatar avatar--empty'>?</div>\n                        </div>\n                    </div>}\n                    <div className={shared ? 'join' : 'start'} onClick={this.handleStartClick} />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Home\n","/* eslint-disable react/prefer-stateless-function */\r\n/* eslint-disable react/jsx-filename-extension */\r\nimport React from 'react'\r\n\r\nimport connect from '@vkontakte/vkui-connect'\r\n\r\nimport Lottie from 'lottie-react-web'\r\n\r\nimport * as Planes from '../animation/planes.json'\r\n\r\nconst texts = {\r\n    china: ['глуять по великой', 'китайской стене'],\r\n    pisa: ['фотографировать', 'башню в пизе'],\r\n    everest: ['покорять вершины', 'эвереста'],\r\n    london: ['смотреть на биг-бен', 'в лондоне'],\r\n    paris: ['есть круассаны', 'в париже'],\r\n    amsterdam: ['на гей-парад', 'в амстердаме'],\r\n    taiga: ['драться с медведем', 'в тайге'],\r\n    prague: ['за пивом и свининой', 'в прагу'],\r\n    munich: ['на окоберфест', 'в мюнхен'],\r\n    kaluga: ['гулять по улицам', 'калуги'],\r\n    tbilisi: ['есть хинкали', 'в тбилиси'],\r\n    mongolia: ['кататься по степям', 'монголии'],\r\n    saintp: ['есть шаверму', 'в санкт-петербурге']\r\n}\r\n\r\nclass Result extends React.Component {\r\n    state = {\r\n        ready: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        setTimeout(() => this.setState({ ready: true }), 800)\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.result !== this.props.result || prevProps.friend.id !== this.props.friend.id) {\r\n            this.setState({ ready: false })\r\n\r\n            setTimeout(() => this.setState({ ready: true }), 800)\r\n        }\r\n    }\r\n\r\n    handleRetryClick = () => {\r\n        connect.send('VKWebAppGetFriends', {})\r\n    }\r\n\r\n    handleShareClick = () => {\r\n        this.props.shareVideo()\r\n    }\r\n\r\n    render() {\r\n        const { ready } = this.state\r\n        const { user, friend, result } = this.props\r\n\r\n        return (\r\n            <div className='result'>\r\n                {!ready && <div className='animation'>\r\n                    <Lottie\r\n                        options={{\r\n                            loop: true,\r\n                            autoplay: true,\r\n                            animationData: Planes.default,\r\n                            rendererSettings: {\r\n                                preserveAspectRatio: 'xMidYMid slice'\r\n                            },\r\n                        }}\r\n                        height='100%'\r\n                        width='100%'\r\n                    />\r\n                </div>}\r\n                <div className={`result_content result--${result} ${!ready ? 'hidden' : ''}`}>\r\n                    <div className='logo' />\r\n                    <div className='result_circles'>\r\n                        <div className='result_circle circle'>\r\n                            <div className='avatar' style={{ backgroundImage: `url(${user && (user.photo_200 || user.photo_max_orig)})` }} />\r\n                        </div>\r\n                        <div className='result_circle circle'>\r\n                            <div className='avatar' style={{ backgroundImage: `url(${friend && (friend.photo_200 || friend.photo_max_orig)})` }} />\r\n                        </div>\r\n                    </div>\r\n                    <div className='result_names'>\r\n                        <div>Я и {friend.first_name}</div>\r\n                    </div>\r\n                    <div className='result_label parallelogram'>\r\n                        <div>отправляемся...</div>\r\n                    </div>\r\n                    <div className='result_text parallelogram'>\r\n                        <div>{texts[result][0]}</div>\r\n                    </div>\r\n                    <div className='result_text result_text--cutted parallelogram'>\r\n                        <div>{texts[result][1]}</div>\r\n                    </div>\r\n                    <div className='share' onClick={this.handleShareClick} />\r\n                    <div className='retry' onClick={this.handleRetryClick}>ещё раз</div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Result\r\n","/* eslint-disable react/jsx-filename-extension */\r\nimport React, { Fragment } from 'react'\r\n\r\nimport Home from '../components/Home'\r\nimport Result from '../components/Result'\r\n\r\nconst Wrapper = ({ block, user, friend, result, shared, shareVideo }) => {\r\n    return (\r\n        <Fragment>\r\n            {block === 'home' && <Home\r\n                user={user}\r\n                shared={shared}\r\n            />}\r\n            {block === 'result' && <Result\r\n                user={user}\r\n                friend={friend}\r\n                result={result}\r\n                shareVideo={shareVideo}\r\n            />}\r\n        </Fragment>\r\n    )\r\n}\r\n\r\nexport default Wrapper\r\n","/* eslint-disable react/jsx-filename-extension */\n\nimport React from 'react'\n\nimport connect from '@vkontakte/vkui-connect'\nimport { View, Panel } from '@vkontakte/vkui'\n\nimport './App.css'\n\nimport Wrapper from './components/Wrapper'\n\nconst results = ['china', 'pisa', 'everest', 'london', 'paris', 'amsterdam', 'taiga', 'prague', 'munich', 'kaluga', 'tbilisi', 'mongolia', 'saintp']\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            block: 'home',\n            user: null,\n            friend: null,\n            result: '',\n            share: false,\n            token: ''\n        }\n    }\n\n    componentDidMount() {\n        connect.send('VKWebAppInit', {})\n\n        connect.subscribe((res) => {\n            switch (res.detail.type) {\n            case 'VKWebAppGetUserInfoResult':\n                this.setState({ user: res.detail.data })\n                break\n            case 'VKWebAppGetFriendsResult':\n                this.setState({\n                    block: 'result',\n                    friend: res.detail.data.users[0],\n                    result: results[Math.floor(Math.random() * results.length)]\n                })\n                break\n            case 'VKWebAppAccessTokenReceived':\n                this.setState({ token: res.detail.data.access_token })\n                break\n            default:\n                break\n            }\n        })\n\n        connect.send('VKWebAppGetUserInfo', {})\n\n        connect.send('VKWebAppGetAuthToken', { app_id: 7105859, scope: 'friends,stories' })\n    }\n\n\n    handleShareVideo = () => {\n        document.getElementById('debug').innerHTML += `${JSON.stringify(this.state)}`\n        this.setState({\n            block: 'home',\n            shared: true\n        })\n    }\n\n    render() {\n        const { block, user, friend, result, shared } = this.state\n\n        return (\n            <View activePanel='main'>\n                <Panel id='main'>\n                    <Wrapper\n                        block={block}\n                        user={user}\n                        friend={friend}\n                        result={result}\n                        shared={shared}\n                        shareVideo={this.handleShareVideo}\n                    />\n                </Panel>\n            </View>\n        )\n    }\n}\n\nexport default App\n","import 'core-js/features/map'\nimport 'core-js/features/set'\nimport React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport App from './App'\n// import registerServiceWorker from './sw';\n\n// Если вы хотите, чтобы ваше веб-приложение работало в оффлайне и загружалось быстрее,\n// расскомментируйте строку с registerServiceWorker();\n// Но не забывайте, что на данный момент у технологии есть достаточно подводных камней\n// Подробнее про сервис воркеры можно почитать тут — https://vk.cc/8MHpmT\n// registerServiceWorker();\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}